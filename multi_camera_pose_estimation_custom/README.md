# 多摄像头姿态估计系统

这个系统提供双摄像头人体姿态估计和自定义关键点可视化功能。

## 功能特性

- 双摄像头实时姿态估计
- 自定义关键点可视化（基于人体解剖学标记点）
- 步态分析
- 高性能推理优化

## 安装要求

- Python 3.7+
- PyTorch 1.8+
- MMPose 1.0+
- OpenCV 4.5+
- CUDA 推荐使用（可选，但可提高性能）

## 快速开始

### 1. 运行标准版本

```bash
python main.py
```

### 2. 运行自定义关键点可视化版本

```bash
python main.py --custom
```

或者使用专用启动脚本:

```bash
python run_custom_dual_camera.py
```

### 3. 指定设备和模型

```bash
python run_custom_dual_camera.py --device cuda:0 --model rtmpose-l_8xb32-270e_coco-wholebody-384x288
```

## 自定义关键点说明

系统可以识别和可视化以下解剖学关键点:

- N1: 乳突
- N2: 肩峰
- N3: 第一胸椎
- N4: 第十二胸椎
- N5: 第一腰椎
- N6: 第五腰椎
- N7: 耻骨联合
- N8: 髂前上棘
- N9: 髌骨
- N10: 第五跖骨
- N11: 足跟
- N12: 手掌
- N13: 脊柱棘突
- N14: 双侧髂嵴
- N15: 髂后上嵴
- N16: 第一跖骨
- N17: 足尖

## 命令行参数

- `--custom`: 使用自定义关键点可视化
- `--device`: 指定推理设备 (e.g., "cuda:0", "cpu")
- `--model`: 指定MMPose模型名称
- `--config`: 指定配置文件路径
- `--debug`: 开启调试模式

## 系统架构

本系统采用多进程架构，每个摄像头运行在独立的进程中以提高性能。主要组件包括:

1. **摄像头捕获**: 以高效率获取视频流
2. **姿态推理**: 使用MMPose模型进行人体关键点检测
3. **自定义关键点计算**: 基于检测到的关键点计算额外的解剖学标记点
4. **可视化**: 实时渲染关键点和连接线

## 性能优化

- 使用多进程架构分离摄像头IO和推理计算
- CUDA优化 (FP16精度、Tensor Cores加速)
- 内存预分配和缓冲区优化
- 异步处理和队列管理 